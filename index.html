<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Monitor Severo Real</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style> /* Estilos acima inclu√≠dos aqui */ </style>
</head>
<body>

    <button id="btn-menu-lateral" onclick="toggleMenu()">‚ò∞</button>
    
    <div id="menu-lateral-65">
        <button onclick="toggleMenu()" style="color:#00ff99; background:none; border:none; font-size:30px;">‚úï Fechar</button>
        <div id="lista-camadas" style="margin-top:20px;"></div>
        <button onclick="limparCamadas()" style="background:#ff4444; color:white;" class="btn-camada">‚ùå Desativar Todas as Camadas</button>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const API_KEY = "7609a59c493758162d9b0a6af2914e1f";
        
        // Mapa base (S√≥ as ruas, bem discreto)
        const map = L.map('map', { zoomControl: false }).setView([-15, -48], 4);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png').addTo(map);

        let camadasAtivas = [];

        function limparCamadas() {
            camadasAtivas.forEach(l => map.removeLayer(l));
            camadasAtivas = [];
        }

        const configuracaoCamadas = [
            // SAT√âLITE COM NUVENS (A que voc√™ pediu)
            { id: 'sat_nuvens', n: 'Sat√©lite + Nuvens Reais', e: 'üåç‚òÅÔ∏è', tipo: 'especial' },
            { id: 'band13', n: 'Band 13 (T√©rmica)', e: 'üì°', tipo: 'custom', url: 'https://realearth.ssec.wisc.edu/tiles/GOES-East-ABI-Geo-Band13/{z}/{x}/{y}.png' },
            { id: 'storm', n: 'Storm Chaser (Radar)', e: 'üå™Ô∏è', tipo: 'custom', url: 'https://tilecache.rainviewer.com/v2/radar/nowcast_5/256/{z}/{x}/{y}/2/1_1.png' },
            { id: 'clouds_new', n: 'S√≥ Nuvens (OWM)', e: '‚òÅÔ∏è', tipo: 'owm' },
            { id: 'precipitation_new', n: 'S√≥ Chuva (OWM)', e: 'üåßÔ∏è', tipo: 'owm' },
            { id: 'temp_new', n: 'Mapa de Calor', e: 'üå°Ô∏è', tipo: 'owm' },
            { id: 'wind_new', n: 'Ventos', e: 'üçÉ', tipo: 'owm' },
            { id: 'cape', n: 'Energia de Raios', e: '‚ö°', tipo: 'om', layer: 'cape' },
            { id: 'uv_index', n: 'Radia√ß√£o UV', e: '‚òÄÔ∏è', tipo: 'om', layer: 'uv_index' }
            // ... adicione as outras seguindo esse padr√£o
        ];

        const container = document.getElementById('lista-camadas');
        
        configuracaoCamadas.forEach(c => {
            const btn = document.createElement('button');
            btn.className = 'btn-camada';
            btn.innerHTML = `${c.e} ${c.n}`;
            btn.onclick = () => {
                limparCamadas(); // Remove a anterior para n√£o sobrepor errado

                if (c.id === 'sat_nuvens') {
                    // Mapa Real + Nuvens do OWM por cima
                    const sat = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}');
                    const nuvens = L.tileLayer(`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${API_KEY}`);
                    sat.addTo(map);
                    nuvens.addTo(map);
                    camadasAtivas.push(sat, nuvens);
                } else {
                    let url = "";
                    if(c.tipo === 'custom') url = c.url;
                    if(c.tipo === 'owm') url = `https://tile.openweathermap.org/map/${c.id}/{z}/{x}/{y}.png?appid=${API_KEY}`;
                    if(c.tipo === 'om') url = `https://maps.open-meteo.com/v1/forecast?layers=${c.layer}&format=tile&z={z}&x={x}&y={y}`;
                    
                    const novaCamada = L.tileLayer(url, { opacity: 1.0, zIndex: 100 });
                    novaCamada.addTo(map);
                    camadasAtivas.push(novaCamada);
                }
                toggleMenu();
            };
            container.appendChild(btn);
        });

        function toggleMenu() { document.getElementById('menu-lateral-65').classList.toggle('menu-active'); }
    </script>
</body>
</html>
